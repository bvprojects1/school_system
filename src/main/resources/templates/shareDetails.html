<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<div th:insert="header::navbar"></div>
<br/>
<br/>
<div class="container">
    <section class="choosen-area-start space">
        <table width="90%" class="center" border="0px">
            <tr>
                <td align="center" colspan="2">
                    <font color="#BF360C;" size="4">
                        <h3>SHARE DETAILS </h3>
                        <div class="error" th:text="${shareError}"/>
                    </font>
                </td>
            </tr>
        </table>
        <table width="90%" class="center" border="0px">
            <tr>
                <td colspan="1">
                    <span th:if="${share.accountStatus.name == 'PENDING_APPROVAL'}">
                        <a href="#" th:href="@{/approveShareAccount/{id}(id=${share.id})}">Approve this Share purchase</a>
                    </span>
                </td>
                <td colspan="3">
                    <font color="gray" size="4"> <span th:text="${shareDetailsInfo}"/></font>
                    <span th:if="${share.accountStatus.name == 'PENDING_APPROVAL'}">
                        Make share payment(<span
                            th:text="${#numbers.formatDecimal(share.quantity*share.unitSharePrice, 0, 'COMMA', 0, 'POINT')}"/>) to <span
                            th:text="${share.user.lastName}"/>'s share account<br/>
                            <font size="2"> This Share was APPROVED by <span th:text="${share.approvedBy}"/> on <span th:text="${#dates.format(share.approvedDate, 'dd-MMM-yyyy HH:mm')}"/> </font>
                        <br/>
<!--                        <a href="#" th:href="@{/makeShareAccountPayment/{id}(id=${share.id})}">-->
<!--                            CASH PAYMENT-->
<!--                        </a>-->
<!--                        <a href="#" th:href="@{/makeShareAccountPayment/{id}(id=${share.id})}">-->
<!--                            TRANSFER FROM USER ACCOUNT-->
<!--                        </a>-->
                    </span>
                    <br/>
                </td>
            </tr>
            <tr>
                <td align="center">
                    <font size="2">Share Owner</font>
                    <br/>
                    <font size="4">
                        <span th:text="${share.user.gender}"/>.
                        <span th:text="${share.user.firstName}"/> <span th:text="${share.user.lastName}"/>
                    </font>
                </td>
                <td align="center"><font size="2"> Account Number</font> <br/>
                    <font size="4px">
                        <div th:text="${share.accountNumber}"/>
                    </font>
                </td>
                <td align="center"><font size="2"> Nunber of Shares</font> <br/>
                    <font size="4px">
                        <div th:text="${share.quantity}"/>
                    </font>
                </td>
                <td align="center"><font size="2">Created</font><br/>
                    <font size="4px">
                        <span th:text="${#dates.format(share.createdDate, 'dd-MMM-yyyy HH:mm')}"></span>
                    </font>
                </td>
            </tr>
            <tr>
                <td align="center">
                    <font size="2">Share Amount</font>
                    <br/>
                    <font size="4">
                        <span th:text="${#numbers.formatDecimal(share.unitSharePrice*share.quantity, 0, 'COMMA', 0, 'POINT')}"/>
                    </font>
                </td>
                <td align="center"><font size="2">  Share Unit Price </font> <br/>
                    <font size="4px">
                        <span th:text="${#numbers.formatDecimal(share.unitSharePrice, 0, 'COMMA', 0, 'POINT')}"/>
                    </font>
                </td>
                <td align="center"><font size="2">Share Account Status</font><br/>
                    <font size="4px">
                        <div th:text="${share.accountStatus.name}"/>
                    </font>
                </td>
                <td align="center">Country/ Branch Created <br/>
                    <font size="4px">
                        <span th:text="${share.country}"/>/
                        <span th:text="${share.branchCode}"/>
                    </font>
                </td>
            </tr>
        </table>
    </section>

    <span th:if="${showTransferBilanzSection}">
    <!-- FORM FOR TRANSFER -->
    <form action="#" th:action="@{/transferFromSavingToShareAccountsFormReview}" method="post" th:object="${transferBilanz}">
        <table class="center" width="100%" border="1">
            <tr>
                <td align="center">
                    <div class="project-title-content">
                        <h4>BUY SHARES FROM SAVING Account</h4>
                        <span><i class="fas fa-crosshairs"></i></span>
                    </div>
                </td>
            </tr>
            <tr>
                <td align="center" colspan="2">
                    <font size="1.5">Account Owner</font><br/>
                    <font size="4">
                        <span style th:text="${session.customerInUse.userName}"/>'s
                    </font>
                    <br/><br/>
                    <label> From Account:</label>
                    <select th:field="*{transferFromAccount}">
                        <option th:each="i : ${session.customerInUse.savingAccount}"
                                th:value="${i.accountNumber}"
                                th:text="${i.accountType.name}+ ----Balance + ${#numbers.formatDecimal(i.accountBalance, 0, 'COMMA', 0, 'POINT')} + ----MinimumBalance + ${#numbers.formatDecimal(i.accountMinBalance, 0, 'COMMA', 0, 'POINT')}">
                        </option>
                    </select>
                    <br/>
                    <br/>
                    <label> <b> Amount:</b></label>
                    <select th:field="*{transferAmount}">
                        <option
                                th:value="${share.accountBalance}"
                                th:text="${#numbers.formatDecimal(share.accountBalance, 0, 'COMMA', 0, 'POINT')}">
                        </option>
                    </select>
                    <input type="hidden" name="shareId" th:value="${share.id}">

                    <br/>
                    <textarea placeholder="Notes here ...." id="notes" rows="3" cols="30" th:field="*{notes}">
                    </textarea>
                    <br/>
                    <br/>
                    <button type="submit" class="btn btn-success">
                         SUBMIT TRANSFER AND BUY SHARES
                    </button>
                    <br/>
                    <br/>
                </td>
            </tr>
        </table>
    </form>
    </span>

</div>

<div th:insert="footer::navbar"></div>
</html>
